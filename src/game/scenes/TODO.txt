refactor out to components / entities / systems